id: github.com/cloud-native-toolkit/terraform-ibm-vpc-gateways
name: ibm-vpc-gateways
type: terraform
description: Terraform module to provision public gateways for an existing VPC instance
tags:
  - network
  - vpc
  - public gateway
versions:
  - platforms: []
    dependencies:
      - id: resource-group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource-group
          output: id
        type: string
        description: The id of the IBM Cloud resource group where the VPC gateways will be created.
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
        description: The name of the vpc instance
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the cluster will be/has been installed.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: subnet_count
        scope: ignore
        type: number
        description: The total number of subnets that will be provisioned in the VPC instance. This value will be used to determine how many gateways to create. At most, three gateways can be created (one for each zone) so the default should suffice in most cases. However, it might create more gateways than needed for small deployments in which case a number less than three can be used.
        default: 3
        optional: true
    version: v1.2.2
    outputs:
      - name: count
        description: The number of gateways created
      - name: gateway_ids
        description: List of ids of the gateways created
      - name: gateways
        description: List of ids and zones of gateways created
  - platforms: []
    dependencies:
      - id: resource-group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource-group
          output: id
        type: string
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
      - name: region
        scope: global
        type: string
      - name: ibmcloud_api_key
        scope: global
        type: string
      - name: subnet_count
        scope: ignore
        type: string
    version: v1.2.1
    outputs:
      - name: count
        description: The number of gateways created
      - name: gateway_ids
        description: List of ids of the gateways created
      - name: gateways
        description: List of ids and zones of gateways created
  - platforms: []
    dependencies:
      - id: resource-group
        refs:
          - soure: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
      - id: vpc
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-vpc
            version: ">= 1.0.0"
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource-group
          output: id
        type: string
      - name: vpc_name
        moduleRef:
          id: vpc
          output: name
        type: string
      - name: region
        scope: global
        type: string
      - name: ibmcloud_api_key
        scope: global
        type: string
      - name: subnet_count
        scope: ignore
        type: string
    version: v1.2.0
    outputs:
      - name: count
        description: The number of gateways created
      - name: gateway_ids
        description: List of ids of the gateways created
      - name: gateways
        description: List of ids and zones of gateways created
  - platforms:
      - kubernetes
      - ocp3
      - ocp4
    dependencies: []
    #    - id: cluster
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-ibm-container-platform
    #          version: ">= 1.7.0"
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-ocp-cluster
    #          version: ">= 2.0.0"
    #    - id: namespace
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-namespace
    #          version: ">= 2.1.0"
    #    - id: dashboard
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-dashboard
    #          version: ">= 1.6.0"
    variables: [{name: resource_group_id, type: string}, {name: region, type: string}, {name: ibmcloud_api_key, type: string}, {name: vpc_name, type: string}, {name: subnet_count, type: string}]
    version: v1.1.0
    outputs:
      - name: count
        description: The number of gateways created
      - name: ids
        description: List of ids of gateways created
  - platforms:
      - kubernetes
      - ocp3
      - ocp4
    dependencies: []
    #    - id: cluster
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-ibm-container-platform
    #          version: ">= 1.7.0"
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-ocp-cluster
    #          version: ">= 2.0.0"
    #    - id: namespace
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-namespace
    #          version: ">= 2.1.0"
    #    - id: dashboard
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-dashboard
    #          version: ">= 1.6.0"
    variables: [{name: resource_group_id, type: string}, {name: region, type: string}, {name: ibmcloud_api_key, type: string}, {name: vpc_name, type: string}, {name: subnet_count, type: string}]
    version: v1.0.0
    outputs:
      - name: gateway_count
        description: The number of gateways created
      - name: gateway_ids
        description: List of ids of gateways created
  - platforms:
      - kubernetes
      - ocp3
      - ocp4
    dependencies: []
    #    - id: cluster
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-ibm-container-platform
    #          version: ">= 1.7.0"
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-ocp-cluster
    #          version: ">= 2.0.0"
    #    - id: namespace
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-namespace
    #          version: ">= 2.1.0"
    #    - id: dashboard
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-dashboard
    #          version: ">= 1.6.0"
    variables: []
    version: v0.0.0
